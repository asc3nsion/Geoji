<!-- 
This is an element button used as a base for other buttons.
 text = The text to be displayed on the button
 icon = The icon to be desplayed on the button
 iput = This is the id of the component the button will call a method on.

 style of the button is set via j-styles behavior.
 interaction is set via j-handler.
 if the button doesn't have an explicit id, one is assigned via auto-id.
-->
<!-- components: -->
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/google-map/google-map.html">
<link rel="import" href="../../elements/j-ui/j-button.html">
<link rel="import" href="../../elements/j-ui/j-profile-img.html">
<link rel="import" href="../../elements/j-ui/j-dialog.html">
<link rel="import" href="../../elements/api/imgur-upload.html">
<!-- behaviors: -->
<link rel="import" href="../../behaviors/style/j-styles.html">
<link rel="import" href="../../behaviors/interaction/j-handler.html">
<link rel="import" href="../../behaviors/selection/auto-id.html">

<style>
	paper-card.mainMap{
		height: 100vh;
	    width: 100vw;
	}
	google-map.mainMap {
	    height: 75vh;
	    width: 85vw;
	}

</style>	

<dom-module id= "geoji-content">
	<template>
		<paper-card id="{{assignCtrl('geojiCard')}}" heading="{{heading}}" image="{{cardImage}}" class="mainMap">
		<div class="topCorner"><paper-icon-button suffix class="closeDialog" icon="clear" on-tap="_closeMap" class="topCorner"></paper-icon-button></div>
		  
		  <div class="card-content floatRight"><h3>{{detail}}</h3></div>
		  <google-map 
		  id="{{assignCtrl('map')}}"
		  latitude="37.779" 
		  longitude="-122.3892" 
		  min-zoom="9" 
		  max-zoom="11"
          language="en" 
          api-key="AIzaSyCgmlzQ8iH-U2KDt2mhXJbZvQm-KB5dWSo"
          clickEvents="true" 
          google-map-dblclick="placeMarker"
          fitToMarkers="true"
          class="mainMap">

		  <google-map-marker latitude="37.78" longitude="-122.3892" draggable="true" drag-events></google-map-marker>
		</google-map>

		  <div class="card-actions">
		    <paper-button on-tap="placeMarker">Start</paper-button>
		  </div>
		</paper-card>

	</template>
</dom-module>

<script>
	// I pass the button handler property from the base element, defined as the input
	// The call back is made via document.querySelector on the input element name.
	Polymer({		
		is: "geoji-content",
		properties: {
			cardImg: {
				type: String,
				value: ""
			},
			heading: {
				type: String,
				value: "GEOJI"
			},
			detail: {
				type: String,
				value: ""
			},
			description: {
				type: String,
				value: ""
			}
			
		},

		behaviors:[StyleBehaviors.JStyles, InteractionBehaviors.JHandler, SelectionBehaviors.AutoId],

		ready: function(){

		},
		attached: function(){
			var map = this.getElem(this.ctrls.map);
			map.resize();
		},
		_closeMap: function(){
			console.log(app.lastRoute);
		}

	});
</script>
